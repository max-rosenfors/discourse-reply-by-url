<script type="text/discourse-plugin" version="0.4">
	if (/.*#reply$/g.test(document.URL)) {
		setTimeout(() => {
			if ($("li#current-user").length) {
				const { REPLY } = require('discourse/models/composer').default;

				const composer = Discourse.__container__.lookup('controller:composer');

				setTimeout(function() {
					const topic = Discourse.__container__.lookup("controller:topic").get("model");
					if (topic) {
					composer.open({
						action: REPLY,
						draftKey: topic.draft_key,
						draftSequence: topic.draft_sequence,
						topic,
					});
					}
				}, 0);
			} else {
				setTimeout(() => {
					$("html").scrollTop(0);
					setTimeout(() => {
						$("button.sign-up-button").trigger("click");
					}, 50);
				}, 1000);
			}
		}, 1000);
	}
</script>
